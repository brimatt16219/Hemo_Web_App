<app-nav-bar></app-nav-bar>
<div class="dashboard-container">
  <h2>Students</h2>

  <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
  
  <button (click)="downloadCSV()" class="download-btn">Download CSV</button>

  <table *ngIf="students.length > 0">
    <thead>
      <tr>
        <th>SID</th>
        <th>Password</th>
        <th>Class Section</th>
        <th>App Settings</th>
        <th>Logged In</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of students">
        <td>{{ student.Sid }}</td>
        <td>{{ student.Password }}</td>
        <td>{{ student.ClassSection }}</td>
        <td>{{ student.AppSettings }}</td>
        <td>{{ student.LoggedIn }}</td>
        <td class="action-buttons">
          <button (click)="openEditPopup(student)">Edit</button>
          <button (click)="confirmDelete(student)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
  <app-edit-student
    *ngIf="showEditModal"
    [student]="selectedStudent"
    (close)="closeEditModal()"
    (save)="saveEditedStudent($event)">
  </app-edit-student>
</div>
